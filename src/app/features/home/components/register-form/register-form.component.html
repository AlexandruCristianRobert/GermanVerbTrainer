<!-- e:\Projects\Angular\German Verbs\german-verb-trainer\src\app\features\home\components\register-form\register-form.component.html -->

<form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- Success Message -->
  <div
    *ngIf="successMessage"
    class="bg-green-50 border-l-4 border-green-500 p-4 rounded"
    role="alert"
  >
    <p class="text-sm text-green-700">{{ successMessage }}</p>
  </div>

  <!-- Error Message -->
  <div
    *ngIf="errorMessage"
    class="bg-red-50 border-l-4 border-red-500 p-4 rounded"
    role="alert"
  >
    <p class="text-sm text-red-700">{{ errorMessage }}</p>
  </div>

  <!-- Full Name Field -->
  <div>
    <label
      for="register-name"
      class="block text-sm font-medium text-gray-700 mb-1"
    >
      Full Name
    </label>
    <input
      id="register-name"
      type="text"
      formControlName="fullName"
      placeholder="John Doe"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
      [class.border-red-500]="fullName?.invalid && fullName?.touched"
    />
    <div *ngIf="fullName?.invalid && fullName?.touched" class="mt-1">
      <p *ngIf="fullName?.errors?.['required']" class="text-sm text-red-600">
        Full name is required
      </p>
      <p *ngIf="fullName?.errors?.['minlength']" class="text-sm text-red-600">
        Name must be at least 2 characters
      </p>
    </div>
  </div>

  <!-- Email Field -->
  <div>
    <label
      for="register-email"
      class="block text-sm font-medium text-gray-700 mb-1"
    >
      Email Address
    </label>
    <input
      id="register-email"
      type="email"
      formControlName="email"
      placeholder="you@example.com"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
      [class.border-red-500]="email?.invalid && email?.touched"
    />
    <div *ngIf="email?.invalid && email?.touched" class="mt-1">
      <p *ngIf="email?.errors?.['required']" class="text-sm text-red-600">
        Email is required
      </p>
      <p *ngIf="email?.errors?.['email']" class="text-sm text-red-600">
        Please enter a valid email address
      </p>
    </div>
  </div>

  <!-- Password Field -->
  <div>
    <label
      for="register-password"
      class="block text-sm font-medium text-gray-700 mb-1"
    >
      Password
    </label>
    <input
      id="register-password"
      type="password"
      formControlName="password"
      placeholder="••••••••"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
      [class.border-red-500]="password?.invalid && password?.touched"
    />

    <!-- Password Strength Indicator -->
    <div *ngIf="password?.value" class="mt-2">
      <div class="flex items-center gap-2">
        <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
          <div
            class="h-full transition-all duration-300"
            [ngClass]="{
              'w-1/3 bg-red-500': getPasswordStrength() === 'weak',
              'w-2/3 bg-yellow-500': getPasswordStrength() === 'medium',
              'w-full bg-green-500': getPasswordStrength() === 'strong'
            }"
          ></div>
        </div>
        <span
          class="text-xs font-medium"
          [ngClass]="{
            'text-red-600': getPasswordStrength() === 'weak',
            'text-yellow-600': getPasswordStrength() === 'medium',
            'text-green-600': getPasswordStrength() === 'strong'
          }"
        >
          {{ getPasswordStrength() | titlecase }}
        </span>
      </div>
    </div>

    <div *ngIf="password?.invalid && password?.touched" class="mt-1">
      <p *ngIf="password?.errors?.['required']" class="text-sm text-red-600">
        Password is required
      </p>
      <p *ngIf="password?.errors?.['minlength']" class="text-sm text-red-600">
        Password must be at least 8 characters
      </p>
      <p *ngIf="password?.errors?.['weak']" class="text-sm text-red-600">
        Password must contain uppercase, lowercase, and number
      </p>
    </div>
  </div>

  <!-- Confirm Password Field -->
  <div>
    <label
      for="register-confirm-password"
      class="block text-sm font-medium text-gray-700 mb-1"
    >
      Confirm Password
    </label>
    <input
      id="register-confirm-password"
      type="password"
      formControlName="confirmPassword"
      placeholder="••••••••"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
      [class.border-red-500]="(confirmPassword?.invalid || registerForm.errors?.['mismatch']) && confirmPassword?.touched"
    />
    <div
      *ngIf="registerForm.errors?.['mismatch'] && confirmPassword?.touched"
      class="mt-1"
    >
      <p class="text-sm text-red-600">Passwords do not match</p>
    </div>
  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    [disabled]="isLoading"
    class="w-full bg-blue-600 text-white py-2.5 px-4 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
  >
    <span *ngIf="!isLoading">Create Account</span>
    <span *ngIf="isLoading" class="flex items-center justify-center">
      <svg
        class="animate-spin h-5 w-5 mr-2"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
        ></path>
      </svg>
      Creating account...
    </span>
  </button>

  <!-- Terms Notice -->
  <p class="text-xs text-center text-gray-500">
    By creating an account, you agree to our Terms of Service and Privacy Policy
  </p>
</form>
